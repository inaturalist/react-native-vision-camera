{"version":3,"names":["_configPlugins","require","withDisableFrameProcessorsIOS","c","withXcodeProject","config","xcodeProject","modResults","configurations","pbxXCBuildConfigurationSection","inheritKey","valueKey","key","_buildSettings$GCC_PR","buildSettings","preprocessorDefinitions","GCC_PREPROCESSOR_DEFINITIONS","includes","push","exports"],"sources":["withDisableFrameProcessorsIOS.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { ConfigPlugin, withXcodeProject, XcodeProject } from '@expo/config-plugins';\n\n/**\n * Set the `disableFrameProcessors` inside of the XcodeProject.\n * This is used to disable frame processors if you don't need it on iOS. (will save CPU and Memory)\n */\nexport const withDisableFrameProcessorsIOS: ConfigPlugin = (c) => {\n  return withXcodeProject(c, (config) => {\n    const xcodeProject: XcodeProject = config.modResults;\n\n    const configurations = xcodeProject.pbxXCBuildConfigurationSection();\n\n    const inheritKey = '\"$(inherited)\"';\n    const valueKey = '\"VISION_CAMERA_DISABLE_FRAME_PROCESSORS=1\"';\n\n    for (const key in configurations) {\n      const buildSettings = configurations[key].buildSettings;\n      if (buildSettings == null) continue;\n\n      const preprocessorDefinitions = (buildSettings.GCC_PREPROCESSOR_DEFINITIONS ?? [inheritKey]) as string[];\n\n      if (!preprocessorDefinitions.includes(valueKey)) preprocessorDefinitions.push(valueKey);\n      buildSettings.GCC_PREPROCESSOR_DEFINITIONS = preprocessorDefinitions;\n    }\n    return config;\n  });\n};\n"],"mappings":";;;;;;AACA,IAAAA,cAAA,GAAAC,OAAA;AADA;;AAGA;AACA;AACA;AACA;AACO,MAAMC,6BAA2C,GAAIC,CAAC,IAAK;EAChE,OAAO,IAAAC,+BAAgB,EAACD,CAAC,EAAGE,MAAM,IAAK;IACrC,MAAMC,YAA0B,GAAGD,MAAM,CAACE,UAAU;IAEpD,MAAMC,cAAc,GAAGF,YAAY,CAACG,8BAA8B,CAAC,CAAC;IAEpE,MAAMC,UAAU,GAAG,gBAAgB;IACnC,MAAMC,QAAQ,GAAG,4CAA4C;IAE7D,KAAK,MAAMC,GAAG,IAAIJ,cAAc,EAAE;MAAA,IAAAK,qBAAA;MAChC,MAAMC,aAAa,GAAGN,cAAc,CAACI,GAAG,CAAC,CAACE,aAAa;MACvD,IAAIA,aAAa,IAAI,IAAI,EAAE;MAE3B,MAAMC,uBAAuB,IAAAF,qBAAA,GAAIC,aAAa,CAACE,4BAA4B,cAAAH,qBAAA,cAAAA,qBAAA,GAAI,CAACH,UAAU,CAAc;MAExG,IAAI,CAACK,uBAAuB,CAACE,QAAQ,CAACN,QAAQ,CAAC,EAAEI,uBAAuB,CAACG,IAAI,CAACP,QAAQ,CAAC;MACvFG,aAAa,CAACE,4BAA4B,GAAGD,uBAAuB;IACtE;IACA,OAAOV,MAAM;EACf,CAAC,CAAC;AACJ,CAAC;AAACc,OAAA,CAAAjB,6BAAA,GAAAA,6BAAA"}